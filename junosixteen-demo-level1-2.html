<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JunoSixteen - Level 1 & 2 Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            margin-bottom: 30px;
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #4ecdc4;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .sidebar {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .game-area {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .level-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .level-btn {
            padding: 15px 30px;
            border: 2px solid #4ecdc4;
            background: transparent;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .level-btn.active {
            background: #4ecdc4;
            color: #333;
        }

        .level-btn:hover {
            background: rgba(78, 205, 196, 0.3);
        }

        .question-container {
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #4ecdc4;
        }

        .question-type {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .type-standard {
            background: #4ecdc4;
            color: #333;
        }

        .type-risk {
            background: #ff6b6b;
            color: white;
        }

        .type-team {
            background: #45b7d1;
            color: white;
        }

        .question-text {
            font-size: 1.3em;
            line-height: 1.6;
            margin-bottom: 30px;
            text-align: left;
        }

        .answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .answer-btn {
            padding: 15px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            text-align: left;
        }

        .answer-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: #4ecdc4;
        }

        .answer-btn.correct {
            background: #4ecdc4;
            border-color: #4ecdc4;
            color: #333;
        }

        .answer-btn.incorrect {
            background: #ff6b6b;
            border-color: #ff6b6b;
        }

        .badges-section {
            margin-bottom: 20px;
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .badge {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .badge.unlocked {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            color: #333;
            font-weight: bold;
        }

        .wissenssnacks {
            margin-bottom: 20px;
        }

        .snack-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .snack-item:hover {
            background: rgba(255,255,255,0.2);
        }

        .snack-duration {
            color: #4ecdc4;
            font-size: 0.9em;
            font-weight: bold;
        }

        .minigame-section {
            margin-top: 20px;
        }

        .minigame-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .minigame-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8787);
            border: none;
            border-radius: 10px;
            padding: 20px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .minigame-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
        }

        .feedback.correct {
            background: rgba(78, 205, 196, 0.2);
            border: 2px solid #4ecdc4;
        }

        .feedback.incorrect {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid #ff6b6b;
        }

        .level-complete {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            color: #333;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
        }

        .points-animation {
            font-size: 2em;
            font-weight: bold;
            animation: pointsGlow 2s ease-in-out;
        }

        @keyframes pointsGlow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .memory-game {
            display: none;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5em;
            transition: all 0.3s ease;
        }

        .memory-card.flipped {
            background: #4ecdc4;
            color: #333;
        }

        .memory-card.matched {
            background: #45b7d1;
            color: white;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .answers {
                grid-template-columns: 1fr;
            }
            
            .level-selector {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üéØ JunoSixteen</div>
            <div class="subtitle">Level 1 & 2 Demo - Gamifiziertes Lernen</div>
        </div>

        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="totalPoints">0</div>
                <div class="stat-label">Gesamtpunkte</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="currentLevel">1</div>
                <div class="stat-label">Aktuelles Level</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="badges">0</div>
                <div class="stat-label">Badges</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Richtige in Folge</div>
            </div>
        </div>

        <div class="level-selector">
            <button class="level-btn active" onclick="switchLevel(1)">Level 1: Rookie</button>
            <button class="level-btn" onclick="switchLevel(2)">Level 2: Explorer</button>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="badges-section">
                    <h3>üèÜ Badges</h3>
                    <div class="badges-grid" id="badgesGrid">
                        <div class="badge">üéâ Erste Antwort</div>
                        <div class="badge">üß† Quiz Master</div>
                        <div class="badge">‚ö° Risk Master</div>
                        <div class="badge">üéÆ Minigame Pro</div>
                        <div class="badge">ü§ù Team Player</div>
                        <div class="badge">üèÜ Level Master</div>
                    </div>
                </div>

                <div class="wissenssnacks">
                    <h3>üçé Wissenssnacks</h3>
                    <div class="snack-item" onclick="showSnack('quick')">
                        <div class="snack-duration">QUICK (2-3 Min.)</div>
                        <div>Datenschutz-Grundlagen</div>
                    </div>
                    <div class="snack-item" onclick="showSnack('short')">
                        <div class="snack-duration">SHORT (5-7 Min.)</div>
                        <div>E-Mail-Etikette</div>
                    </div>
                    <div class="snack-item" onclick="showSnack('medium')">
                        <div class="snack-duration">MEDIUM (10-15 Min.)</div>
                        <div>DSGVO-Umsetzung</div>
                    </div>
                </div>
            </div>

            <div class="game-area">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>

                <div class="question-container" id="questionContainer">
                    <div class="question-header">
                        <div class="question-number" id="questionNumber">Frage 1/10</div>
                        <div class="question-type type-standard" id="questionType">Standard</div>
                    </div>
                    <div class="question-text" id="questionText">
                        Willkommen zu JunoSixteen! Klicken Sie auf "Frage starten" um zu beginnen.
                    </div>
                    <button class="level-btn" onclick="startQuestion()" id="startBtn">Frage starten</button>
                    <div class="answers" id="answersContainer" style="display: none;"></div>
                </div>

                <div class="feedback" id="feedback" style="display: none;"></div>

                <div class="level-complete" id="levelComplete" style="display: none;">
                    <h2>üéâ Level Abgeschlossen!</h2>
                    <div class="points-animation" id="levelPoints">+ 5.000 Punkte</div>
                    <p>Sie haben Zugang zu den Minigames freigeschaltet!</p>
                    <button class="level-btn" onclick="showMinigames()" style="margin-top: 20px;">Minigames spielen</button>
                </div>
            </div>

            <div class="sidebar">
                <div class="minigame-section">
                    <h3>üéÆ Minigames</h3>
                    <div class="minigame-grid">
                        <button class="minigame-btn" onclick="startMemoryGame()">
                            üß† Memory<br>Cards
                        </button>
                        <button class="minigame-btn" onclick="startWordScramble()">
                            üî§ Word<br>Scramble
                        </button>
                        <button class="minigame-btn" onclick="startReactionTest()">
                            ‚ö° Reaction<br>Test
                        </button>
                        <button class="minigame-btn" onclick="startPuzzleSlider()">
                            üß© Puzzle<br>Slider
                        </button>
                    </div>
                </div>

                <div class="memory-game" id="memoryGame">
                    <h4>üß† Memory Cards</h4>
                    <p>Finden Sie die passenden Paare!</p>
                    <div class="memory-grid" id="memoryGrid"></div>
                    <button class="level-btn" onclick="hideMinigames()" style="margin-top: 20px;">Zur√ºck zum Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            currentLevel: 1,
            currentQuestion: 1,
            totalPoints: 0,
            levelPoints: 0,
            streak: 0,
            badges: [],
            answeredQuestions: []
        };

        // Question Pools f√ºr Level 1 & 2
        const questionPools = {
            1: [
                {
                    type: 'standard',
                    text: 'Was ist der wichtigste Grundsatz des Datenschutzes?',
                    answers: [
                        'Datenminimierung - nur notwendige Daten sammeln',
                        'Datenmaximierung - alle verf√ºgbaren Daten sammeln',
                        'Daten k√∂nnen unbegrenzt gespeichert werden',
                        'Datenschutz ist optional'
                    ],
                    correct: 0,
                    explanation: 'Datenminimierung ist ein Kernprinzip der DSGVO.'
                },
                {
                    type: 'standard',
                    text: 'Wie lange d√ºrfen personenbezogene Daten gespeichert werden?',
                    answers: [
                        'Unbegrenzt',
                        'Nur so lange wie f√ºr den Zweck erforderlich',
                        'Mindestens 10 Jahre',
                        'Bis das Unternehmen schlie√üt'
                    ],
                    correct: 1,
                    explanation: 'Daten d√ºrfen nur so lange gespeichert werden, wie es f√ºr den urspr√ºnglichen Zweck erforderlich ist.'
                },
                {
                    type: 'standard',
                    text: 'Was bedeutet "Einwilligung" nach DSGVO?',
                    answers: [
                        'Stillschweigende Zustimmung',
                        'Freiwillige, spezifische und informierte Zustimmung',
                        'Automatische Zustimmung bei Webseitenbesuch',
                        'Zustimmung durch Nichthandeln'
                    ],
                    correct: 1,
                    explanation: 'Einwilligung muss freiwillig, spezifisch, informiert und eindeutig sein.'
                },
                {
                    type: 'standard',
                    text: 'Welche Rechte haben betroffene Personen nach DSGVO?',
                    answers: [
                        'Nur das Recht auf Information',
                        'Auskunft, Berichtigung, L√∂schung und Daten√ºbertragbarkeit',
                        'Keine besonderen Rechte',
                        'Nur das Recht auf L√∂schung'
                    ],
                    correct: 1,
                    explanation: 'Die DSGVO gew√§hrt umfassende Betroffenenrechte.'
                },
                {
                    type: 'risk',
                    text: 'RISIKOFRAGE: Ein Mitarbeiter m√∂chte Kundendaten f√ºr Marketingzwecke nutzen.',
                    parts: [
                        'Ist eine separate Einwilligung erforderlich?',
                        'Muss der Datenschutzbeauftragte informiert werden?'
                    ],
                    answers: [
                        ['Ja, separate Einwilligung n√∂tig', 'Nein, urspr√ºngliche Einwilligung reicht'],
                        ['Ja, DSB muss informiert werden', 'Nein, keine Information n√∂tig']
                    ],
                    correct: [0, 0],
                    explanation: 'F√ºr neue Zwecke ist eine separate Einwilligung erforderlich und der DSB muss informiert werden.'
                },
                {
                    type: 'standard',
                    text: 'Was ist bei der √úbermittlung von Daten in Drittl√§nder zu beachten?',
                    answers: [
                        'Ist immer erlaubt',
                        'Angemessenes Datenschutzniveau oder Garantien erforderlich',
                        'Nur innerhalb der EU m√∂glich',
                        'Bedarf keiner besonderen Regelung'
                    ],
                    correct: 1,
                    explanation: 'Drittland√ºbermittlungen erfordern angemessenes Schutzniveau oder geeignete Garantien.'
                },
                {
                    type: 'standard',
                    text: 'Wann muss eine Datenschutz-Folgenabsch√§tzung durchgef√ºhrt werden?',
                    answers: [
                        'Bei jeder Datenverarbeitung',
                        'Bei voraussichtlich hohem Risiko f√ºr Betroffene',
                        'Nur bei Verst√∂√üen',
                        'Nie erforderlich'
                    ],
                    correct: 1,
                    explanation: 'Eine DSFA ist bei voraussichtlich hohem Risiko f√ºr die Rechte und Freiheiten der Betroffenen erforderlich.'
                },
                {
                    type: 'standard',
                    text: 'Was charakterisiert personenbezogene Daten?',
                    answers: [
                        'Nur Name und Adresse',
                        'Alle Informationen, die sich auf eine identifizierte oder identifizierbare Person beziehen',
                        'Nur biometrische Daten',
                        'Nur sensible Daten'
                    ],
                    correct: 1,
                    explanation: 'Personenbezogene Daten umfassen alle Informationen √ºber identifizierte oder identifizierbare Personen.'
                },
                {
                    type: 'team',
                    text: 'TEAMFRAGE: Ihr Team entdeckt eine potenzielle Datenpanne.',
                    teamQuestion: 'Welche Schritte sollten innerhalb der ersten 72 Stunden unternommen werden?',
                    answers: [
                        'Aufsichtsbeh√∂rde benachrichtigen und Dokumentation erstellen',
                        'Abwarten und beobachten',
                        'Nur interne Meldung',
                        'Panne geheim halten'
                    ],
                    correct: 0,
                    explanation: 'Bei Datenpannen ist eine schnelle Reaktion mit Beh√∂rdenmeldung innerhalb von 72 Stunden erforderlich.'
                },
                {
                    type: 'risk',
                    text: 'FINALE RISIKOFRAGE: Ein externer Dienstleister soll Kundendaten verarbeiten.',
                    parts: [
                        'Ist ein Auftragsverarbeitungsvertrag erforderlich?',
                        'M√ºssen technische und organisatorische Ma√ünahmen definiert werden?'
                    ],
                    answers: [
                        ['Ja, AVV ist erforderlich', 'Nein, Vertrag ist optional'],
                        ['Ja, TOMs m√ºssen definiert werden', 'Nein, TOMs sind optional']
                    ],
                    correct: [0, 0],
                    explanation: 'Bei Auftragsverarbeitung sind sowohl AVV als auch definierte TOMs gesetzlich vorgeschrieben.'
                }
            ],
            2: [
                {
                    type: 'standard',
                    text: 'Welche Bu√ügelder k√∂nnen bei DSGVO-Verst√∂√üen verh√§ngt werden?',
                    answers: [
                        'Maximal 1.000 Euro',
                        'Bis zu 20 Millionen Euro oder 4% des Jahresumsatzes',
                        'Nur Verwarnungen',
                        'Gef√§ngnisstrafen'
                    ],
                    correct: 1,
                    explanation: 'Die DSGVO sieht hohe Bu√ügelder von bis zu 20 Mio. Euro oder 4% des Jahresumsatzes vor.'
                },
                {
                    type: 'standard',
                    text: 'Was versteht man unter "Privacy by Design"?',
                    answers: [
                        'Nachtr√§glicher Datenschutz',
                        'Datenschutz von Anfang an mitdenken',
                        'Datenschutz ist optional',
                        'Nur f√ºr gro√üe Unternehmen relevant'
                    ],
                    correct: 1,
                    explanation: 'Privacy by Design bedeutet, Datenschutz von Beginn an in Systeme und Prozesse zu integrieren.'
                },
                {
                    type: 'standard',
                    text: 'Wer darf als Datenschutzbeauftragter bestellt werden?',
                    answers: [
                        'Jeder Mitarbeiter',
                        'Person mit Fachwissen im Datenschutzrecht',
                        'Nur externe Berater',
                        'Gesch√§ftsf√ºhrung automatisch'
                    ],
                    correct: 1,
                    explanation: 'Der DSB muss √ºber Fachwissen im Datenschutzrecht und in der Praxis verf√ºgen.'
                },
                {
                    type: 'standard',
                    text: 'Was sind technische und organisatorische Ma√ünahmen (TOMs)?',
                    answers: [
                        'Nur IT-Sicherheit',
                        'Umfassende Schutzma√ünahmen f√ºr personenbezogene Daten',
                        'Nur Mitarbeiterschulungen',
                        'Optional bei kleinen Unternehmen'
                    ],
                    correct: 1,
                    explanation: 'TOMs umfassen alle technischen und organisatorischen Ma√ünahmen zum Schutz personenbezogener Daten.'
                },
                {
                    type: 'risk',
                    text: 'RISIKOFRAGE: Ein Unternehmen plant eine neue App mit Standortdaten.',
                    parts: [
                        'Ist eine Datenschutz-Folgenabsch√§tzung erforderlich?',
                        'M√ºssen die Nutzer explizit √ºber die Standortnutzung informiert werden?'
                    ],
                    answers: [
                        ['Ja, DSFA ist erforderlich', 'Nein, DSFA nicht n√∂tig'],
                        ['Ja, explizite Information n√∂tig', 'Nein, allgemeine AGB reichen']
                    ],
                    correct: [0, 0],
                    explanation: 'Standortdaten erfordern eine DSFA und explizite, transparente Information der Nutzer.'
                },
                {
                    type: 'standard',
                    text: 'Wie lange haben Unternehmen Zeit, auf Auskunftsersuchen zu antworten?',
                    answers: [
                        '72 Stunden',
                        '1 Monat (verl√§ngerbar auf 3 Monate)',
                        '6 Monate',
                        'Keine feste Frist'
                    ],
                    correct: 1,
                    explanation: 'Auskunftsersuchen m√ºssen grunds√§tzlich innerhalb eines Monats beantwortet werden.'
                },
                {
                    type: 'standard',
                    text: 'Was ist bei der Video√ºberwachung am Arbeitsplatz zu beachten?',
                    answers: [
                        'Ist immer erlaubt',
                        'Interessenabw√§gung und Mitarbeiterinformation erforderlich',
                        'Nur mit Betriebsrat m√∂glich',
                        'Grunds√§tzlich verboten'
                    ],
                    correct: 1,
                    explanation: 'Video√ºberwachung erfordert eine sorgf√§ltige Interessenabw√§gung und transparente Information.'
                },
                {
                    type: 'standard',
                    text: 'Welche Pflichten hat ein Auftragsverarbeiter?',
                    answers: [
                        'Keine besonderen Pflichten',
                        'Weisungsgebundene Verarbeitung und Vertraulichkeit',
                        'Nur Datenl√∂schung',
                        'Vollst√§ndige Haftungsfreistellung'
                    ],
                    correct: 1,
                    explanation: 'Auftragsverarbeiter m√ºssen weisungsgebunden verarbeiten und Vertraulichkeit gew√§hrleisten.'
                },
                {
                    type: 'team',
                    text: 'TEAMFRAGE: Ihr Team entwickelt eine neue Software.',
                    teamQuestion: 'Welche Datenschutz-Prinzipien sollten von Anfang an ber√ºcksichtigt werden?',
                    answers: [
                        'Privacy by Design, Datenminimierung und Zweckbindung',
                        'Nur die technische Funktionalit√§t',
                        'Datenschutz kann sp√§ter hinzugef√ºgt werden',
                        'Nur bei sensiblen Daten relevant'
                    ],
                    correct: 0,
                    explanation: 'Privacy by Design, Datenminimierung und Zweckbindung sind von Anfang an zu ber√ºcksichtigen.'
                },
                {
                    type: 'risk',
                    text: 'FINALE RISIKOFRAGE: Ein Mitarbeiter verliert ein Laptop mit Kundendaten.',
                    parts: [
                        'Muss eine Datenpanne gemeldet werden?',
                        'M√ºssen die betroffenen Kunden informiert werden?'
                    ],
                    answers: [
                        ['Ja, Meldung ist erforderlich', 'Nein, nur interne Behandlung'],
                        ['Ja, Kunden m√ºssen informiert werden', 'Nein, interne Meldung reicht']
                    ],
                    correct: [0, 0],
                    explanation: 'Laptop-Verlust mit personenbezogenen Daten erfordert sowohl Beh√∂rdenmeldung als auch Betroffeneninformation.'
                }
            ]
        };

        // Wissenssnacks Content
        const wissenssnacks = {
            quick: {
                title: 'QUICK: Datenschutz-Grundlagen',
                duration: '2-3 Minuten',
                content: 'Die DSGVO sch√ºtzt personenbezogene Daten. Wichtigste Prinzipien: Rechtm√§√üigkeit, Zweckbindung, Datenminimierung, Richtigkeit, Speicherbegrenzung, Sicherheit und Rechenschaftspflicht.',
                points: 100
            },
            short: {
                title: 'SHORT: E-Mail-Etikette',
                duration: '5-7 Minuten',
                content: 'Professionelle E-Mails: Klare Betreffzeile, h√∂fliche Anrede, strukturierter Inhalt, eindeutige Handlungsaufforderung, professionelle Signatur. Antworten innerhalb von 24-48 Stunden.',
                points: 250
            },
            medium: {
                title: 'MEDIUM: DSGVO-Umsetzung',
                duration: '10-15 Minuten',
                content: 'Praktische DSGVO-Umsetzung: Verzeichnis von Verarbeitungst√§tigkeiten erstellen, Datenschutzerkl√§rung anpassen, Betroffenenrechte implementieren, TOMs definieren, Mitarbeiter schulen.',
                points: 500
            }
        };

        // Memory Game Data
        const memoryCards = [
            'üîí', 'üîë', 'üìä', '‚öñÔ∏è', 'üõ°Ô∏è', 'üìã', 'üíæ', 'üåê'
        ];

        function switchLevel(level) {
            gameState.currentLevel = level;
            gameState.currentQuestion = 1;
            gameState.levelPoints = 0;
            gameState.answeredQuestions = [];
            
            document.querySelectorAll('.level-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('currentLevel').textContent = level;
            
            updateProgress();
            resetQuestion();
        }

        function startQuestion() {
            const questions = questionPools[gameState.currentLevel];
            const question = questions[gameState.currentQuestion - 1];
            
            document.getElementById('startBtn').style.display = 'none';
            displayQuestion(question);
        }

        function displayQuestion(question) {
            const container = document.getElementById('questionContainer');
            const questionNumber = document.getElementById('questionNumber');
            const questionType = document.getElementById('questionType');
            const questionText = document.getElementById('questionText');
            const answersContainer = document.getElementById('answersContainer');
            
            questionNumber.textContent = `Frage ${gameState.currentQuestion}/10`;
            questionText.textContent = question.text;
            
            // Question type styling
            questionType.textContent = question.type === 'standard' ? 'Standard' : 
                                     question.type === 'risk' ? 'üéØ Risiko' : 'ü§ù Team';
            questionType.className = `question-type type-${question.type}`;
            
            // Clear previous answers
            answersContainer.innerHTML = '';
            answersContainer.style.display = 'grid';
            
            if (question.type === 'risk') {
                displayRiskQuestion(question);
            } else {
                displayStandardQuestion(question);
            }
        }

        function displayStandardQuestion(question) {
            const answersContainer = document.getElementById('answersContainer');
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = `${String.fromCharCode(65 + index)}. ${answer}`;
                button.onclick = () => checkAnswer(index, question);
                answersContainer.appendChild(button);
            });
        }

        function displayRiskQuestion(question) {
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.style.gridTemplateColumns = '1fr';
            
            question.parts.forEach((part, partIndex) => {
                const partDiv = document.createElement('div');
                partDiv.style.marginBottom = '20px';
                partDiv.innerHTML = `<h4>Teil ${partIndex + 1}: ${part}</h4>`;
                
                const partAnswers = document.createElement('div');
                partAnswers.style.display = 'grid';
                partAnswers.style.gridTemplateColumns = '1fr 1fr';
                partAnswers.style.gap = '10px';
                
                question.answers[partIndex].forEach((answer, answerIndex) => {
                    const button = document.createElement('button');
                    button.className = 'answer-btn';
                    button.textContent = answer;
                    button.onclick = () => selectRiskAnswer(partIndex, answerIndex, button);
                    partAnswers.appendChild(button);
                });
                
                partDiv.appendChild(partAnswers);
                answersContainer.appendChild(partDiv);
            });
            
            const submitBtn = document.createElement('button');
            submitBtn.className = 'level-btn';
            submitBtn.textContent = 'Antworten einreichen';
            submitBtn.onclick = () => checkRiskAnswers(question);
            answersContainer.appendChild(submitBtn);
        }

        let riskAnswers = [];

        function selectRiskAnswer(partIndex, answerIndex, button) {
            // Deselect other buttons in this part
            button.parentElement.querySelectorAll('.answer-btn').forEach(btn => {
                btn.classList.remove('correct');
            });
            
            button.classList.add('correct');
            riskAnswers[partIndex] = answerIndex;
        }

        function checkRiskAnswers(question) {
            const isCorrect = question.correct.every((correct, index) => riskAnswers[index] === correct);
            
            if (isCorrect) {
                // Double points for risk question
                const points = calculatePoints() * 2;
                gameState.levelPoints *= 2;
                gameState.totalPoints += points;
                gameState.streak++;
                showFeedback(true, `Risikofrage gemeistert! Punkte verdoppelt: +${points}`, question.explanation);
                unlockBadge('risk');
            } else {
                // Restart level for risk question
                gameState.levelPoints = 0;
                gameState.currentQuestion = 1;
                gameState.streak = 0;
                showFeedback(false, 'Risikofrage verfehlt! Level wird neu gestartet.', question.explanation);
                setTimeout(() => {
                    resetQuestion();
                }, 3000);
                return;
            }
            
            riskAnswers = [];
            nextQuestion();
        }

        function checkAnswer(selectedIndex, question) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => btn.onclick = null);
            
            const isCorrect = selectedIndex === question.correct;
            const points = calculatePoints();
            
            if (isCorrect) {
                buttons[selectedIndex].classList.add('correct');
                gameState.levelPoints += points;
                gameState.totalPoints += points;
                gameState.streak++;
                showFeedback(true, `Richtig! +${points} Punkte`, question.explanation);
                
                if (gameState.currentQuestion === 1) unlockBadge('first');
                if (gameState.streak === 5) unlockBadge('streak');
            } else {
                buttons[selectedIndex].classList.add('incorrect');
                buttons[question.correct].classList.add('correct');
                gameState.levelPoints -= points;
                gameState.totalPoints = Math.max(0, gameState.totalPoints - points);
                gameState.streak = 0;
                showFeedback(false, `Falsch! -${points} Punkte`, question.explanation);
            }
            
            updateStats();
            setTimeout(nextQuestion, 3000);
        }

        function calculatePoints() {
            return gameState.currentLevel * 50 * gameState.currentQuestion;
        }

        function showFeedback(isCorrect, message, explanation) {
            const feedback = document.getElementById('feedback');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = `<strong>${message}</strong><br><br>${explanation}`;
            feedback.style.display = 'block';
        }

        function nextQuestion() {
            if (gameState.currentQuestion >= 10) {
                completLevel();
                return;
            }
            
            gameState.currentQuestion++;
            updateProgress();
            resetQuestion();
            
            // Auto start next question after delay
            setTimeout(() => {
                startQuestion();
            }, 1000);
        }

        function completLevel() {
            // Level completion bonus (5x multiplier)
            const bonus = gameState.levelPoints * 4; // Already have 1x, so add 4x more
            gameState.totalPoints += bonus;
            
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('feedback').style.display = 'none';
            
            const levelComplete = document.getElementById('levelComplete');
            const levelPoints = document.getElementById('levelPoints');
            levelPoints.textContent = `+${gameState.levelPoints * 5} Punkte (Level-Bonus!)`;
            levelComplete.style.display = 'block';
            
            unlockBadge('level');
            updateStats();
        }

        function resetQuestion() {
            document.getElementById('startBtn').style.display = 'block';
            document.getElementById('startBtn').textContent = 'N√§chste Frage starten';
            document.getElementById('answersContainer').style.display = 'none';
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('levelComplete').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('questionText').textContent = 'Bereit f√ºr die n√§chste Frage?';
        }

        function updateProgress() {
            const progress = (gameState.currentQuestion - 1) / 10 * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function updateStats() {
            document.getElementById('totalPoints').textContent = gameState.totalPoints.toLocaleString();
            document.getElementById('currentLevel').textContent = gameState.currentLevel;
            document.getElementById('badges').textContent = gameState.badges.length;
            document.getElementById('streak').textContent = gameState.streak;
        }

        function unlockBadge(type) {
            if (gameState.badges.includes(type)) return;
            
            gameState.badges.push(type);
            const badges = document.querySelectorAll('.badge');
            
            switch(type) {
                case 'first': badges[0].classList.add('unlocked'); break;
                case 'streak': badges[1].classList.add('unlocked'); break;
                case 'risk': badges[2].classList.add('unlocked'); break;
                case 'minigame': badges[3].classList.add('unlocked'); break;
                case 'team': badges[4].classList.add('unlocked'); break;
                case 'level': badges[5].classList.add('unlocked'); break;
            }
        }

        function showSnack(type) {
            const snack = wissenssnacks[type];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <h2>${snack.title}</h2>
                <p><strong>Dauer:</strong> ${snack.duration}</p>
                <div style="margin: 20px 0; text-align: left; line-height: 1.6;">
                    ${snack.content}
                </div>
                <button class="level-btn" onclick="completeSnack('${type}')">Abschlie√üen (+${snack.points} Punkte)</button>
            `;
        }

        function completeSnack(type) {
            const snack = wissenssnacks[type];
            gameState.totalPoints += snack.points;
            updateStats();
            
            showFeedback(true, `Wissenssnack abgeschlossen! +${snack.points} Punkte`, 'Weiter so! Microlearning bringt Sie schnell voran.');
            
            setTimeout(() => {
                resetQuestion();
            }, 2000);
        }

        function showMinigames() {
            document.getElementById('levelComplete').style.display = 'none';
        }

        function startMemoryGame() {
            const memoryGame = document.getElementById('memoryGame');
            const grid = document.getElementById('memoryGrid');
            
            // Hide other elements and show memory game
            document.querySelector('.game-area').style.display = 'none';
            memoryGame.style.display = 'block';
            
            // Create shuffled cards (pairs)
            const cards = [...memoryCards, ...memoryCards].sort(() => Math.random() - 0.5);
            
            grid.innerHTML = '';
            let flippedCards = [];
            let matchedPairs = 0;
            
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.textContent = '?';
                cardElement.dataset.card = card;
                cardElement.onclick = () => flipCard(cardElement);
                grid.appendChild(cardElement);
            });
            
            function flipCard(cardElement) {
                if (cardElement.classList.contains('flipped') || flippedCards.length >= 2) return;
                
                cardElement.classList.add('flipped');
                cardElement.textContent = cardElement.dataset.card;
                flippedCards.push(cardElement);
                
                if (flippedCards.length === 2) {
                    setTimeout(() => {
                        if (flippedCards[0].dataset.card === flippedCards[1].dataset.card) {
                            flippedCards.forEach(card => card.classList.add('matched'));
                            matchedPairs++;
                            
                            if (matchedPairs === memoryCards.length) {
                                gameState.totalPoints += 500;
                                unlockBadge('minigame');
                                updateStats();
                                alert('Memory Game gewonnen! +500 Punkte');
                            }
                        } else {
                            flippedCards.forEach(card => {
                                card.classList.remove('flipped');
                                card.textContent = '?';
                            });
                        }
                        flippedCards = [];
                    }, 1000);
                }
            }
        }

        function startWordScramble() {
            alert('Word Scramble wird gestartet! (Demo-Funktion)');
            gameState.totalPoints += 300;
            updateStats();
        }

        function startReactionTest() {
            alert('Reaction Test wird gestartet! (Demo-Funktion)');
            gameState.totalPoints += 200;
            updateStats();
        }

        function startPuzzleSlider() {
            alert('Puzzle Slider wird gestartet! (Demo-Funktion)');
            gameState.totalPoints += 400;
            updateStats();
        }

        function hideMinigames() {
            document.getElementById('memoryGame').style.display = 'none';
            document.querySelector('.game-area').style.display = 'block';
            resetQuestion();
        }

        // Initialize game
        updateStats();
        updateProgress();
    </script>
</body>
</html> 